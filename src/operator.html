<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Umbrellaprompter</title>
  <link rel="stylesheet" href="css/operator-modern.css">
</head>
<body>
  <header class="header">
    <div class="logo">
      <div class="logo-icon">
        <svg viewBox="0 0 512 512" fill="none">
          <defs>
            <linearGradient id="umbrellaGrad" x1="0" y1="0" x2="512" y2="512" gradientUnits="userSpaceOnUse">
              <stop offset="0%" stop-color="#00C6FB"/>
              <stop offset="100%" stop-color="#005BEA"/>
            </linearGradient>
            <mask id="iconCutout" maskUnits="userSpaceOnUse" x="0" y="0" width="512" height="512">
              <rect width="512" height="512" rx="100" fill="white"/>
              <g fill="black">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M256 120C183.107 120 124 179.107 124 252H164C164 201.189 205.189 160 256 160C306.811 160 348 201.189 348 252H388C388 179.107 328.893 120 256 120Z"/>
                <path d="M174 272L202 360H310L338 272H174Z"/>
                <rect x="215" y="300" width="82" height="12" rx="6"/>
                <rect x="215" y="324" width="50" height="12" rx="6"/>
              </g>
            </mask>
          </defs>
          <rect width="512" height="512" rx="100" fill="url(#umbrellaGrad)" mask="url(#iconCutout)"/>
        </svg>
      </div>
      <span class="logo-text">Umbrellaprompter</span>
    </div>

    <div class="header-divider"></div>

    <div class="dropdown" id="fileDropdown">
      <button type="button" class="btn ghost dropdown-toggle">
        <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"/></svg>
        File
      </button>
      <div class="dropdown-menu">
        <button type="button" class="dropdown-item" id="openFileBtn">
          <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"/></svg>
          Open File
        </button>
        <button type="button" class="dropdown-item" id="saveProjectBtn">
          <svg viewBox="0 0 24 24"><path d="M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7l-4-4z"/></svg>
          Save Project
        </button>
        <button type="button" class="dropdown-item" id="loadProjectBtn">
          <svg viewBox="0 0 24 24"><path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7l-4-4z"/></svg>
          Load Project
        </button>
      </div>
    </div>

    <div class="dropdown" id="exportDropdown">
      <button type="button" class="btn ghost dropdown-toggle">
        <svg viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
        Export
      </button>
      <div class="dropdown-menu">
        <button type="button" class="dropdown-item" id="exportGuideBtn">
          <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/></svg>
          Export Timeline
        </button>
        <button type="button" class="dropdown-item" id="exportDocxBtn">
          <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.11 0-2 .89-2 2v16c0 1.11.89 2 2 2h8l6-6V4c0-1.11-.89-2-2-2zm4 18l-4 4H6c-1.11 0-2-.89-2-2V4c0-1.11.89-2 2-2h8v6h6v10z"/></svg>
          Export Script
        </button>
      </div>
    </div>

    <div class="header-divider"></div>

    <button class="btn primary" id="headerPlayPauseBtn">
      <svg viewBox="0 0 24 24" id="headerPlayIcon"><path d="M8 5v14l11-7z"/></svg>
      <span id="headerPlayText">Play Teleprompter</span>
    </button>

    <button class="btn success" id="toggleRecordingBtn">
      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="8"/></svg>
      Start Recording
    </button>

    <!-- Recording Timer in Header -->
    <div class="header-recording-timer" id="headerRecordingTimer" style="display: none;">
      <div class="recording-dot-small"></div>
      <span class="header-timer" id="headerSessionTimer">00:00:00</span>
    </div>

    <div class="file-indicator">
      <span class="dot"></span>
      <span id="fileName">No file loaded</span>
    </div>

    <div class="version-info">
      <span class="version-badge" id="versionBadge">v1.2.0</span>
      <button class="btn btn-check-updates" id="checkUpdatesBtn">Check for Updates</button>
    </div>
  </header>

  <!-- Update Banner -->
  <div class="update-banner" id="updateBanner">
    <svg class="update-banner-icon" viewBox="0 0 24 24">
      <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
    </svg>
    <div class="update-banner-text" id="updateText">
      Update available <span id="updateVersion"></span>
    </div>
    <button class="btn" id="updateActionBtn">Download</button>
    <button class="update-banner-close" id="updateCloseBtn">
      <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
    </button>
  </div>

  <main class="main">
    <div class="script-panel">
      <!-- Multi-Script Tabs - Phase 1 Feature -->
      <div class="script-tabs" id="scriptTabs">
        <div class="script-tab active" data-script-id="main">
          <span class="script-tab-name">Untitled</span>
          <div class="script-tab-status"></div>
          <button class="script-tab-close" onclick="event.stopPropagation();">
            <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
          </button>
        </div>
        <button class="script-tab-add" id="addScriptTab" title="Add script">
          <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
        </button>
      </div>

      <div class="script-header">
        <h2>Script</h2>
        <div class="script-meta">
          <div class="view-toggle">
            <button class="btn active" id="viewEditorBtn">Editor</button>
            <button class="btn" id="viewMonitorBtn">Monitor</button>
          </div>
          <span class="char-count" id="charCount">0 characters</span>
          <button class="btn btn-sm" id="cleanUpBtn" title="Remove extra blank lines">
            <svg viewBox="0 0 24 24"><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"/></svg>
            Clean Up
          </button>
        </div>
      </div>
      <div class="script-content">
        <div class="script-editor active" id="editorView">
          <textarea id="scriptText" placeholder="Start typing your script here, or open a Word document..."></textarea>
        </div>
        <div class="script-monitor" id="monitorView">
          <div class="monitor-container" id="monitorContainer">
            <!-- Scaled clone of teleprompter - renders at teleprompter size then scaled down -->
            <div class="monitor-preview-frame">
              <div class="monitor-preview" id="monitorPreview">
                <!-- Inner container for mirror/flip transforms (separate from scale) -->
                <div class="monitor-flip-container" id="monitorFlipContainer">
                  <div class="gradient-top"></div>
                  <div class="reading-guide"></div>
                  <div class="script-wrapper" id="monitorScriptWrapper">
                    <div class="script-text" id="monitorScriptText">Waiting for script...</div>
                  </div>
                  <div class="gradient-bottom"></div>
                  <!-- Countdown Overlay -->
                  <div class="monitor-countdown-overlay" id="monitorCountdownOverlay">
                    <div class="monitor-countdown-number" id="monitorCountdownNumber">3</div>
                    <div class="monitor-countdown-text">Starting in...</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="monitor-progress">
            <div class="monitor-progress-bar" id="monitorProgressBar"></div>
          </div>
          <div class="monitor-status">
            <div class="status-badge">
              <div class="status-dot" id="monitorStatusDot"></div>
              <span id="monitorStatusText">Ready</span>
            </div>
            <button class="btn" id="editFromMonitorBtn" style="padding: 4px 8px; font-size: 10px;">
              <svg viewBox="0 0 24 24" style="width: 12px; height: 12px;"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
              Edit
            </button>
            <span id="monitorPercent">0%</span>
          </div>
        </div>
      </div>
    </div>

    <aside class="control-panel">
      <!-- Control Panel Header with Toggle -->
      <div class="control-panel-header" id="controlPanelHeader" style="display: none;">
        <h2>Controls</h2>
        <button class="btn btn-sm" id="showTimelineBtn">
          <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
          Show Timeline
        </button>
      </div>

      <!-- Display -->
      <div class="control-section">
        <div class="section-header">
          <svg viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"/></svg>
          <h3>Display Output</h3>
        </div>
        <div class="select-wrapper" style="display: flex; gap: 6px;">
          <select id="displaySelect" style="flex: 1;">
            <option value="">Select display...</option>
          </select>
          <button class="btn" id="refreshDisplaysBtn" title="Refresh displays" style="padding: 8px 10px;">
            <svg viewBox="0 0 24 24" style="width: 14px; height: 14px;"><path d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
          </button>
        </div>
        <div class="button-row">
          <button class="btn success" id="openDisplayBtn">Open Display</button>
          <button class="btn" id="closeDisplayBtn">Close</button>
        </div>
      </div>

      <!-- Playback -->
      <div class="control-section">
        <div class="section-header">
          <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
          <h3>Playback</h3>
        </div>

        <div class="toggle-row">
          <label for="countdownCheckbox">Countdown before start</label>
          <label class="toggle">
            <input type="checkbox" id="countdownCheckbox" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="countdown-row" id="countdownRow">
          <label>Seconds:</label>
          <input type="number" id="countdownSeconds" value="3" min="1" max="10">
        </div>

        <div class="slider-group" style="margin-top: 12px;">
          <div class="slider-label">
            <span>Speed</span>
            <span class="slider-value" id="speedValue">30</span>
          </div>
          <input type="range" id="speedSlider" min="1" max="100" value="30">
        </div>

      </div>

      <!-- Recording Section (shown when recording) -->
      <div class="control-section recording-section" id="recordingSection" style="display: none;">
        <div class="section-header">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="8" fill="currentColor"/></svg>
          <h3>Recording</h3>
          <div class="recording-timer-inline" id="recordingTimerInline">
            <div class="recording-dot-inline"></div>
            <span id="inlineSessionTimer">00:00:00</span>
          </div>
        </div>
        <div class="marker-buttons-inline">
          <button class="marker-btn-inline retake" id="inlineMarkerRetake">
            <span>üî¥</span> Retake
          </button>
          <button class="marker-btn-inline stumble" id="inlineMarkerStumble">
            <span>‚ö†Ô∏è</span> Stumble
          </button>
          <button class="marker-btn-inline note" id="inlineMarkerNote">
            <span>üìù</span> Note
          </button>
        </div>
      </div>

      <!-- Position -->
      <div class="control-section">
        <div class="section-header">
          <svg viewBox="0 0 24 24"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"/></svg>
          <h3>Position</h3>
        </div>
        <div class="slider-group">
          <div class="slider-label">
            <span>Scroll Position</span>
            <span class="slider-value" id="positionValue">0%</span>
          </div>
          <input type="range" id="positionSlider" min="0" max="100" value="0">
        </div>
        <div class="position-actions">
          <button class="btn" id="jumpStartBtn">Start</button>
          <button class="btn" id="jumpCursorBtn" title="Jump to cursor position in editor">Cursor</button>
          <button class="btn" id="jumpEndBtn">End</button>
        </div>
        <!-- Find in script -->
        <div style="margin-top: 10px;">
          <div style="display: flex; gap: 6px;">
            <input type="text" id="findTextInput" placeholder="Find text..." style="flex: 1; padding: 6px 8px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: var(--radius-md); color: var(--text-primary); font-size: 12px;">
            <button class="btn" id="findTextBtn" style="padding: 6px 10px;">Find</button>
          </div>
        </div>
      </div>

      <!-- Appearance & Remote Tabs -->
      <div class="control-section">
        <div class="section-header">
          <svg viewBox="0 0 24 24"><path d="M12 2l-5.5 9h11z"/><circle cx="17.5" cy="17.5" r="4.5"/><path d="M3 13.5h8v8H3z"/></svg>
          <select id="settingsTabSelect" class="settings-tab-select">
            <option value="appearance">Appearance</option>
            <option value="remote">Remote Control</option>
          </select>
        </div>

        <!-- Appearance Tab -->
        <div class="tab-content active" id="tab-appearance">
          <div class="style-grid">
            <div class="style-row">
              <label>Font</label>
              <div class="select-wrapper" style="margin: 0; width: 100px;">
                <select id="fontFamilySelect" style="padding: 6px 8px;">
                  <option value="Arial">Arial</option>
                  <option value="Helvetica">Helvetica</option>
                  <option value="Georgia">Georgia</option>
                  <option value="Times New Roman">Times</option>
                  <option value="Verdana">Verdana</option>
                  <option value="Courier New">Courier</option>
                </select>
              </div>
            </div>
            <div class="slider-group" style="margin-top: 8px;">
              <div class="slider-label">
                <span>Font Size</span>
                <span class="slider-value" id="fontSizeValue">72</span>
              </div>
              <input type="range" id="fontSizeInput" min="24" max="200" value="72">
            </div>
            <div class="style-row">
              <label>Text Color</label>
              <div class="color-input-wrapper">
                <input type="color" id="textColorInput" value="#ffffff">
              </div>
            </div>
            <div class="style-row">
              <label>Background</label>
              <div class="color-input-wrapper">
                <input type="color" id="bgColorInput" value="#000000">
              </div>
            </div>
            <div class="toggle-row">
              <label for="mirrorCheckbox">Mirror (Horizontal)</label>
              <label class="toggle">
                <input type="checkbox" id="mirrorCheckbox">
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="toggle-row">
              <label for="flipCheckbox">Flip (Vertical)</label>
              <label class="toggle">
                <input type="checkbox" id="flipCheckbox">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>

        <!-- Remote Tab -->
        <div class="tab-content" id="tab-remote">
          <div class="remote-status">
            <div class="status-dot" id="remoteStatusDot"></div>
            <span id="remoteStatusText">Remote control off</span>
          </div>
          <div class="button-row">
            <button class="btn success" id="startRemoteBtn">Start Server</button>
            <button class="btn" id="stopRemoteBtn">Stop</button>
          </div>
          <div class="remote-url" id="remoteUrlBox" style="display: none;">
            <div class="qr-container">
              <img id="remoteQrCode" alt="QR Code" style="width: 150px; height: 150px; border-radius: 8px; background: white; padding: 8px;">
            </div>
            <div class="remote-url-label">Scan QR code or open URL:</div>
            <div class="remote-url-text" id="remoteUrl"></div>
          </div>
        </div>
      </div>

      <!-- Keyboard shortcuts -->
      <div class="keyboard-hints">
        <h4>Keyboard Shortcuts</h4>
        <div class="hint-row">
          <span>Play / Pause</span>
          <kbd class="kbd">Space</kbd>
        </div>
        <div class="hint-row">
          <span>Speed +/-</span>
          <kbd class="kbd">‚Üë</kbd> <kbd class="kbd">‚Üì</kbd>
        </div>
        <div class="hint-row">
          <span>Jump Start/End</span>
          <kbd class="kbd">Home</kbd> <kbd class="kbd">End</kbd>
        </div>
        <div class="hint-row">
          <span>Close Display</span>
          <kbd class="kbd">Esc</kbd>
        </div>
      </div>

      <!-- Marker Timeline Panel - Phase 2 Feature -->
      <div class="marker-timeline" id="markerTimeline">
        <div class="marker-timeline-header">
          <h3>Recording Timeline</h3>
          <button class="btn btn-sm" id="showControlsBtn">
            <svg viewBox="0 0 24 24"><path d="M12.14 2.17a10 10 0 0 0-9.96 9.96c0 5.52 4.48 10 10 10 5.52 0 10-4.48 10-10 0-5.52-4.48-10-10-10h-.04zm.02 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/><path d="M11 7h2v6h-2zm0 8h2v2h-2z"/></svg>
            Show Controls
          </button>
        </div>
        <div class="marker-timeline-content" id="markerTimelineContent">
          <div class="marker-timeline-empty">
            <svg viewBox="0 0 24 24" style="width: 48px; height: 48px; opacity: 0.3; margin-bottom: 12px;">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <p>No markers yet</p>
            <span>Click marker buttons below to add timestamps</span>
          </div>
        </div>
        <div class="marker-timeline-buttons" id="timelineMarkerButtons">
          <button class="marker-btn-timeline retake" id="timelineMarkerRetake" disabled>
            <span>üî¥</span> Retake
          </button>
          <button class="marker-btn-timeline stumble" id="timelineMarkerStumble" disabled>
            <span>‚ö†Ô∏è</span> Stumble
          </button>
          <button class="marker-btn-timeline note" id="timelineMarkerNote" disabled>
            <span>üìù</span> Note
          </button>
        </div>
        <div class="marker-timeline-footer">
          <div class="marker-stats">
            <span id="markerCount">0 markers</span>
            <span id="markerDuration">00:00:00</span>
          </div>
        </div>
      </div>

    </aside>
  </main>

  <!-- Script Rename Modal -->
  <div class="modal-overlay" id="renameModal">
    <div class="modal">
      <h3>Rename Script</h3>
      <input type="text" id="renameInput" placeholder="Enter script name...">
      <div class="modal-buttons">
        <button class="btn" id="renameCancelBtn">Cancel</button>
        <button class="btn primary" id="renameSaveBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- Slide Range Modal -->
  <div class="modal-overlay" id="slideRangeModal">
    <div class="modal">
      <h3>Edit Slide Range</h3>
      <input type="text" id="slideRangeInput" placeholder='e.g., "1-10" or "5" or "1-3, 8-10"'>
      <div class="modal-buttons">
        <button class="btn" id="slideRangeCancelBtn">Cancel</button>
        <button class="btn primary" id="slideRangeSaveBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- Note Marker Modal -->
  <div class="modal-overlay" id="noteModal">
    <div class="modal">
      <h3>Add Note</h3>
      <input type="text" id="noteInput" placeholder="Enter note...">
      <div class="modal-buttons">
        <button class="btn" id="noteCancelBtn">Cancel</button>
        <button class="btn primary" id="noteSaveBtn">Add Note</button>
      </div>
    </div>
  </div>

  <!-- Retake Marker Modal -->
  <div class="modal-overlay" id="retakeModal">
    <div class="modal">
      <h3>Mark Retake</h3>
      <p style="color: var(--text-secondary); font-size: 13px; margin: 8px 0 12px 0;">Where should the editor go back to for the retake?</p>
      <input type="text" id="retakeInput" placeholder="Starting at...">
      <div class="modal-buttons">
        <button class="btn" id="retakeCancelBtn">Cancel</button>
        <button class="btn danger" id="retakeSaveBtn">Mark Retake</button>
      </div>
    </div>
  </div>

  <!-- Export Guide Modal -->
  <div class="modal-overlay" id="exportModal">
    <div class="modal">
      <h3>Export Editing Guide</h3>
      <p style="color: var(--text-secondary); font-size: 13px; margin: 12px 0;">Choose export format:</p>
      <div class="modal-buttons">
        <button class="btn" id="exportCancelBtn">Cancel</button>
        <button class="btn" id="exportCsvBtn">Export CSV</button>
        <button class="btn primary" id="exportTxtBtn">Export TXT</button>
      </div>
    </div>
  </div>

  <!-- Refresh Warning Modal -->
  <div class="modal-overlay" id="refreshWarningModal">
    <div class="modal">
      <h3>Refresh App?</h3>
      <p style="color: var(--text-secondary); font-size: 13px; margin: 12px 0;">This will reload the app and may clear unsaved work. Are you sure?</p>
      <div class="modal-buttons">
        <button class="btn" id="refreshCancelBtn">Cancel</button>
        <button class="btn primary" id="refreshConfirmBtn">Refresh</button>
      </div>
    </div>
  </div>

  <!-- Stop Recording Confirmation Modal -->
  <div class="modal-overlay" id="stopRecordingModal">
    <div class="modal">
      <h3>Stop Recording?</h3>
      <p style="color: var(--text-secondary); font-size: 13px; margin: 12px 0 16px 0;">
        This will end your recording session.
      </p>
      <div style="background: var(--accent-subtle); border-left: 3px solid var(--accent); padding: 12px; border-radius: 4px; margin-bottom: 16px;">
        <p style="color: var(--text-primary); font-size: 12px; margin: 0; font-weight: 600;">
          üí° Tip: Export your timeline before stopping to save your markers for video editing.
        </p>
      </div>
      <div class="modal-buttons">
        <button class="btn" id="stopRecordingCancelBtn">Cancel</button>
        <button class="btn danger" id="stopRecordingConfirmBtn">Stop Recording</button>
      </div>
    </div>
  </div>

  <!-- Export Timeline Reminder Modal -->
  <div class="modal-overlay" id="exportTimelineReminderModal">
    <div class="modal">
      <h3>Recording Stopped</h3>
      <p style="color: var(--text-secondary); font-size: 13px; margin: 12px 0;">
        Your recording session has ended. Would you like to export the timeline with your markers?
      </p>
      <div style="background: var(--bg-tertiary); padding: 12px; border-radius: 6px; margin: 16px 0;">
        <p style="color: var(--text-tertiary); font-size: 11px; margin: 0;">
          <strong style="color: var(--text-secondary);">Recording Summary:</strong><br>
          <span id="exportReminderMarkerCount">0 markers</span> ‚Ä¢
          <span id="exportReminderDuration">00:00:00</span>
        </p>
      </div>
      <div class="modal-buttons">
        <button class="btn" id="exportReminderLaterBtn">Maybe Later</button>
        <button class="btn primary" id="exportReminderExportBtn">Export Timeline</button>
      </div>
    </div>
  </div>

  <!-- Auto-save Indicator - Phase 1 Feature -->
  <div class="autosave-indicator" id="autosaveIndicator">
    <div class="autosave-spinner" id="autosaveSpinner"></div>
    <span id="autosaveText">Auto-saving...</span>
    <span class="autosave-checkmark" id="autosaveCheckmark" style="display: none;">‚úì</span>
  </div>

  <script src="js/operator.js"></script>
</body>
</html>
